<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="google-site-verification" content="bD25FlddJ5iUqCTYXs1uNvs0QwCCiqVysJ-89a6rxLQ" />
    <meta name="description" content="Create and share your blog posts instantly with BlogRack — the free, easy-to-use platform for bloggers of all levels. Start blogging today!">
    <meta name="robots" content="index, follow">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="BlogRack is a comprehensive professional blogging platform for content creators. Write, publish, and share your stories with the world. Features include rich text editor, social sharing, user management, and SEO optimization.">
    <meta name="keywords" content="blogging platform, content creation, blog writing, online publishing, social sharing, professional blogging, content management, story publishing, writing platform, blog editor">
    <meta name="author" content="BlogRack">
    <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
    <meta name="googlebot" content="index, follow">
    <meta name="language" content="English">

    <!-- Canonical URL -->
    <link rel="canonical" href="https://mywebview.github.io/BlogRack/">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://mywebview.github.io/BlogRack/">
    <meta property="og:title" content="BlogRack - Professional Blogging Platform">
    <meta property="og:description" content="Professional blogging platform for content creators. Write, publish and share your stories with the world. Features rich text editor, social sharing, and SEO optimization.">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://mywebview.github.io/BlogRack/">
    <meta name="twitter:title" content="BlogRack - Professional Blogging Platform">
    <meta name="twitter:description" content="Professional blogging platform for content creators. Write, publish and share your stories with the world.">
    <meta name="twitter:creator" content="@blograck">
    <meta name="twitter:site" content="@blograck">
    <title>BlogRack</title>
    <link rel="icon" type="image/png" href="logo.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #6c5ce7;
            --primary-dark: #5d4fcf;
            --secondary: #a29bfe;
            --accent: #fd79a8;
            --accent-dark: #e66797;
            --dark: #2d3436;
            --light: #f5f6fa;
            --gray: #636e72;
            --light-gray: #dfe6e9;
            --success: #00b894;
            --warning: #fdcb6e;
            --danger: #d63031;
            --info: #0984e3;
            --card-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f8f9fa;
            color: var(--dark);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            background: linear-gradient(135deg, #f5f7fa 0%, #e4edf5 100%);
        }

        .gradient-bg {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
        }

        .gradient-accent-bg {
            background: linear-gradient(135deg, var(--accent) 0%, #ff7675 100%);
            color: white;
        }

        .gradient-success-bg {
            background: linear-gradient(135deg, var(--success) 0%, #55efc4 100%);
            color: white;
        }

        .gradient-warning-bg {
            background: linear-gradient(135deg, var(--warning) 0%, #ffeaa7 100%);
            color: var(--dark);
        }

        .gradient-danger-bg {
            background: linear-gradient(135deg, var(--danger) 0%, #ff7675 100%);
            color: white;
        }

        .gradient-info-bg {
            background: linear-gradient(135deg, var(--info) 0%, #74b9ff 100%);
            color: white;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        header {
            padding: 20px 0;
            background: rgba(255, 255, 255, 0.95);
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.08);
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 28px;
            font-weight: 800;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .logo img {
            height: 55px;
            width: auto;
        }

        .logo-text {
            font-size: 28px;
            font-weight: 800;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 15px;
        }

        nav ul li a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 600;
            transition: var(--transition);
            padding: 8px 15px;
            border-radius: 30px;
        }

        nav ul li a:hover {
            color: var(--primary);
            background: rgba(108, 92, 231, 0.1);
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 12px 28px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 600;
            transition: var(--transition);
            border: none;
            cursor: pointer;
            gap: 8px;
            font-size: 16px;
        }

        .btn i {
            font-size: 18px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            box-shadow: 0 5px 15px rgba(108, 92, 231, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(108, 92, 231, 0.4);
        }

        .btn-accent {
            background: linear-gradient(135deg, var(--accent) 0%, #ff7675 100%);
            color: white;
            box-shadow: 0 5px 15px rgba(253, 121, 168, 0.3);
        }

        .btn-accent:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(253, 121, 168, 0.4);
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
        }

        .btn-outline:hover {
            background: var(--primary);
            color: white;
        }

        .hero {
            padding: 100px 0 80px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><polygon fill="rgba(108, 92, 231, 0.05)" points="0,100 100,0 100,100"/></svg>');
            background-size: cover;
            z-index: -1;
        }

        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 20px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            line-height: 1.2;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
        }

        .hero p {
            font-size: 1.4rem;
            color: var(--gray);
            max-width: 700px;
            margin: 0 auto 40px;
            font-weight: 400;
        }

        .hero-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
        }

        .dashboard {
            padding: 80px 0;
            flex: 1;
        }

        .section-title {
            font-size: 2.5rem;
            margin-bottom: 40px;
            position: relative;
            display: inline-block;
            color: var(--dark);
            text-align: center;
            width: 100%;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 5px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            border-radius: 5px;
        }

        .privacy-notice {
            background-color: #fff3cd;
            color: #856404;
            padding: 15px 25px;
            border-radius: 12px;
            margin-bottom: 30px;
            border-left: 5px solid #ffeeba;
            font-size: 16px;
            max-width: 800px;
            margin: 0 auto 40px;
        }

        .search-container {
            display: flex;
            margin-bottom: 30px;
            gap: 15px;
            max-width: 800px;
            margin: 0 auto 40px;
        }

        .search-input {
            flex: 1;
            padding: 15px 25px;
            border: 2px solid var(--light-gray);
            border-radius: 50px;
            font-size: 16px;
            transition: var(--transition);
            box-shadow: var(--card-shadow);
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 5px 15px rgba(108, 92, 231, 0.2);
        }

        .search-btn {
            padding: 15px 30px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
            box-shadow: 0 5px 15px rgba(108, 92, 231, 0.3);
        }

        .search-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(108, 92, 231, 0.4);
        }

        .filter-tabs {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 40px;
            flex-wrap: wrap;
            max-width: 900px;
            margin: 0 auto 40px;
        }

        .filter-tab {
            padding: 12px 25px;
            background: white;
            border-radius: 50px;
            font-size: 16px;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: var(--card-shadow);
            font-weight: 600;
            border: 2px solid transparent;
        }

        .filter-tab:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }

        .filter-tab.active {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            border-color: var(--primary);
        }

        .blog-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 40px;
            margin-top: 30px;
        }

        .blog-card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: var(--card-shadow);
            transition: var(--transition);
            cursor: pointer;
            display: flex;
            flex-direction: column;
            height: 100%;
            position: relative;
        }

        .blog-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
        }

        .blog-card-img {
            height: 220px;
            overflow: hidden;
            position: relative;
        }

        .blog-card-img img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s;
        }

        .blog-card:hover .blog-card-img img {
            transform: scale(1.05);
        }

        .blog-card-content {
            padding: 25px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .blog-card-category {
            display: inline-block;
            padding: 8px 15px;
            border-radius: 50px;
            font-size: 14px;
            font-weight: 700;
            margin-bottom: 15px;
            background: linear-gradient(135deg, var(--info) 0%, #74b9ff 100%);
            color: white;
            align-self: flex-start;
        }

        .blog-card-title {
            font-size: 22px;
            margin-bottom: 15px;
            color: var(--dark);
            flex: 1;
        }

        .blog-card-excerpt {
            color: var(--gray);
            margin-bottom: 20px;
            font-size: 16px;
            line-height: 1.7;
        }

        .blog-card-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 14px;
            color: var(--gray);
            border-top: 1px solid var(--light-gray);
            padding-top: 20px;
            margin-top: auto;
        }

        .author-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .author-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .share-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255, 255, 255, 0.9);
            border: none;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            color: var(--primary);
            font-size: 18px;
            backdrop-filter: blur(10px);
        }

        .share-btn:hover {
            background: var(--primary);
            color: white;
            transform: scale(1.1);
        }

        .auth-form {
            max-width: 500px;
            margin: 50px auto;
            background: white;
            padding: 50px;
            border-radius: 20px;
            box-shadow: var(--card-shadow);
            flex: 1;
        }

        .auth-form h2 {
            text-align: center;
            margin-bottom: 40px;
            color: var(--primary);
            font-size: 32px;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--dark);
            font-size: 16px;
        }

        .form-control {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid var(--light-gray);
            border-radius: 12px;
            font-size: 16px;
            transition: var(--transition);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 5px 15px rgba(108, 92, 231, 0.1);
        }

        .form-footer {
            text-align: center;
            margin-top: 30px;
            font-size: 16px;
        }

        .form-footer a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 600;
        }

        .form-footer a:hover {
            text-decoration: underline;
        }

        .editor-container {
            max-width: 900px;
            margin: 50px auto;
            background: white;
            padding: 50px;
            border-radius: 20px;
            box-shadow: var(--card-shadow);
            flex: 1;
        }

        .editor-container h2 {
            margin-bottom: 40px;
            color: var(--primary);
            text-align: center;
            font-size: 32px;
        }

        .editor-toolbar {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            padding: 15px;
            background: #f8f9fa;
            border: 2px solid var(--light-gray);
            border-bottom: none;
            border-radius: 12px 12px 0 0;
            margin-bottom: 0;
        }

        .toolbar-group {
            display: flex;
            gap: 4px;
            align-items: center;
        }

        .toolbar-group::after {
            content: '';
            width: 1px;
            height: 24px;
            background: var(--light-gray);
            margin: 0 8px;
        }

        .toolbar-group:last-child::after {
            display: none;
        }

        .toolbar-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            border: none;
            border-radius: 6px;
            background: transparent;
            color: var(--dark);
            cursor: pointer;
            transition: var(--transition);
            font-size: 16px;
        }

        .toolbar-btn:hover {
            background: var(--light-gray);
            color: var(--primary);
        }

        .toolbar-btn.active {
            background: var(--primary);
            color: white;
        }

        .toolbar-select {
            padding: 6px 12px;
            border: 1px solid var(--light-gray);
            border-radius: 6px;
            background: white;
            font-size: 14px;
            cursor: pointer;
            min-width: 120px;
        }

        .toolbar-select:focus {
            outline: none;
            border-color: var(--primary);
        }

        .color-picker {
            width: 36px;
            height: 36px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            padding: 0;
            overflow: hidden;
        }

        .color-picker input[type="color"] {
            width: 100%;
            height: 100%;
            border: none;
            cursor: pointer;
        }

        #blogEditor {
            min-height: 400px;
            border: 2px solid var(--light-gray);
            border-top: none;
            border-radius: 0 0 12px 12px;
            padding: 25px;
            font-size: 16px;
            transition: var(--transition);
            line-height: 1.6;
        }

        #blogEditor:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 5px 15px rgba(108, 92, 231, 0.1);
        }

        #blogEditor h1, #blogEditor h2, #blogEditor h3, #blogEditor h4, #blogEditor h5, #blogEditor h6 {
            margin: 20px 0 10px 0;
            color: var(--primary);
        }

        #blogEditor p {
            margin: 10px 0;
        }

        #blogEditor ul, #blogEditor ol {
            margin: 10px 0;
            padding-left: 30px;
        }

        #blogEditor li {
            margin: 5px 0;
        }

        #blogEditor blockquote {
            margin: 15px 0;
            padding: 15px 20px;
            border-left: 4px solid var(--primary);
            background: #f8f9fa;
            font-style: italic;
        }

        #blogEditor table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }

        #blogEditor table th,
        #blogEditor table td {
            border: 1px solid var(--light-gray);
            padding: 8px 12px;
            text-align: left;
        }

        #blogEditor table th {
            background: var(--light);
            font-weight: 600;
        }

        #blogEditor a {
            color: var(--primary);
            text-decoration: underline;
        }

        #blogEditor img {
            max-width: 100%;
            height: auto;
            margin: 15px 0;
            border-radius: 8px;
        }

        .category-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 30px;
        }

        .category-tag {
            padding: 10px 25px;
            background: var(--light);
            border-radius: 50px;
            font-size: 16px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
            border: 2px solid transparent;
        }

        .category-tag:hover {
            background: #e0e0e0;
        }

        .category-tag.active {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            border-color: var(--primary);
        }

        .custom-category {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            align-items: center;
        }

        .custom-category input {
            flex: 1;
            padding: 8px 15px;
            border: 2px solid var(--light-gray);
            border-radius: 25px;
            font-size: 14px;
        }

        .custom-category input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .custom-category button {
            padding: 8px 15px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
        }

        .keywords-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .blog-detail {
            max-width: 800px;
            margin: 50px auto;
            background: white;
            padding: 50px;
            border-radius: 20px;
            box-shadow: var(--card-shadow);
            flex: 1;
        }

        .blog-detail-title {
            font-size: 42px;
            margin-bottom: 20px;
            color: var(--dark);
            line-height: 1.3;
        }

        .blog-detail-meta {
            display: flex;
            justify-content: space-between;
            margin-bottom: 40px;
            color: var(--gray);
            font-size: 16px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--light-gray);
        }

        .blog-detail-category {
            display: inline-block;
            padding: 10px 25px;
            border-radius: 50px;
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 30px;
            background: linear-gradient(135deg, var(--info) 0%, #74b9ff 100%);
            color: white;
        }

        .blog-detail-content {
            line-height: 1.8;
            font-size: 18px;
            color: var(--dark);
        }

        .blog-detail-content img {
            max-width: 100%;
            height: auto;
            margin: 30px 0;
            border-radius: 15px;
            box-shadow: var(--card-shadow);
        }

        .blog-detail-content p {
            margin-bottom: 25px;
        }

        .blog-detail-content h1, .blog-detail-content h2, 
        .blog-detail-content h3, .blog-detail-content h4,
        .blog-detail-content h5, .blog-detail-content h6 {
            margin: 40px 0 20px;
            color: var(--primary);
        }

        .blog-detail-content ul, .blog-detail-content ol {
            margin: 20px 0;
            padding-left: 30px;
        }

        .blog-detail-content li {
            margin: 8px 0;
        }

        .blog-detail-content blockquote {
            margin: 25px 0;
            padding: 20px 25px;
            border-left: 4px solid var(--primary);
            background: #f8f9fa;
            font-style: italic;
        }

        .blog-detail-content table {
            width: 100%;
            border-collapse: collapse;
            margin: 25px 0;
        }

        .blog-detail-content table th,
        .blog-detail-content table td {
            border: 1px solid var(--light-gray);
            padding: 12px 15px;
            text-align: left;
        }

        .blog-detail-content table th {
            background: var(--light);
            font-weight: 600;
        }

        .user-menu {
            position: relative;
        }

        .user-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-weight: bold;
            font-size: 20px;
            transition: var(--transition);
            border: 2px solid white;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .user-avatar:hover {
            transform: scale(1.05);
        }

        .dropdown-menu {
            position: absolute;
            top: 65px;
            right: 0;
            background: white;
            border-radius: 15px;
            box-shadow: var(--card-shadow);
            width: 220px;
            padding: 15px 0;
            display: none;
            z-index: 100;
            overflow: hidden;
        }

        .dropdown-menu.show {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .dropdown-menu a {
            display: flex;
            align-items: center;
            padding: 15px 25px;
            color: var(--dark);
            text-decoration: none;
            transition: var(--transition);
            gap: 10px;
            font-weight: 500;
        }

        .dropdown-menu a:hover {
            background: rgba(108, 92, 231, 0.05);
            color: var(--primary);
        }

        .dropdown-menu a i {
            width: 24px;
            text-align: center;
        }

        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            padding: 20px 30px;
            background: var(--success);
            color: white;
            border-radius: 15px;
            box-shadow: var(--card-shadow);
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 16px;
            font-weight: 500;
            max-width: 400px;
        }

        .toast i {
            font-size: 24px;
        }

        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }

        .toast.error {
            background: var(--danger);
        }

        .loading-spinner {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
        }

        .spinner {
            width: 70px;
            height: 70px;
            border: 7px solid rgba(255, 255, 255, 0.3);
            border-top: 7px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        .post-actions {
            margin-top: 30px;
            display: flex;
            gap: 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        footer {
            background: var(--dark);
            color: white;
            padding: 70px 0 30px;
            margin-top: auto;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-bottom: 40px;
        }

        .footer-column h3 {
            font-size: 22px;
            margin-bottom: 25px;
            position: relative;
            padding-bottom: 15px;
        }

        .footer-column h3::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 50px;
            height: 3px;
            background: var(--primary);
        }

        .footer-column p {
            color: #bbb;
            line-height: 1.8;
            margin-bottom: 20px;
        }

        .footer-column ul {
            list-style: none;
        }

        .footer-column ul li {
            margin-bottom: 15px;
        }

        .footer-column ul li a {
            color: #bbb;
            text-decoration: none;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .footer-column ul li a:hover {
            color: white;
            transform: translateX(5px);
        }

        .footer-column .footer-link {
            color: var(--accent);
            font-weight: 600;
            font-size: 18px;
        }

        .footer-column .footer-link:hover {
            color: white;
            transform: none;
        }

        .footer-logo {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 20px;
        }

        .footer-logo img {
            height: 45px;
            width: auto;
        }

        .footer-logo-text {
            font-size: 24px;
            font-weight: 800;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: white;
        }

        .footer-bottom {
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #bbb;
            font-size: 16px;
        }

        .back-to-dashboard {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 30px;
            color: var(--primary);
            text-decoration: none;
            font-weight: 600;
            transition: var(--transition);
        }

        .back-to-dashboard:hover {
            transform: translateX(-5px);
        }

        @media (max-width: 992px) {
            .hero h1 {
                font-size: 2.8rem;
            }
            
            .blog-grid {
                grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
                gap: 30px;
            }
            
            .editor-toolbar {
                flex-direction: column;
                gap: 10px;
            }
            
            .toolbar-group::after {
                display: none;
            }
        }

        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 20px;
            }
            
            nav ul {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .hero h1 {
                font-size: 2.3rem;
            }
            
            .hero p {
                font-size: 1.2rem;
            }
            
            .hero-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .section-title {
                font-size: 2rem;
            }
            
            .auth-form,
            .editor-container,
            .blog-detail {
                padding: 30px;
            }
            
            .keywords-container {
                grid-template-columns: 1fr;
            }
            
            .footer-content {
                grid-template-columns: 1fr;
            }
            
            .editor-toolbar {
                padding: 10px;
                gap: 5px;
            }
            
            .toolbar-btn {
                width: 32px;
                height: 32px;
                font-size: 14px;
            }

            .logo img {
                height: 40px;
            }

            .logo-text {
                font-size: 24px;
            }

            .footer-logo img {
                height: 35px;
            }

            .footer-logo-text {
                font-size: 20px;
            }
        }

        @media (max-width: 480px) {
            .hero h1 {
                font-size: 2rem;
            }
            
            .blog-card-img {
                height: 180px;
            }
            
            .search-container {
                flex-direction: column;
            }
            
            .search-btn {
                width: 100%;
            }

            .logo {
                gap: 6px;
            }

            .logo img {
                height: 35px;
            }

            .logo-text {
                font-size: 22px;
            }

            .footer-logo {
                gap: 6px;
            }

            .footer-logo img {
                height: 30px;
            }

            .footer-logo-text {
                font-size: 18px;
            }
        }
    </style>
</head>
<body>
    <div class="loading-spinner" id="loadingSpinner">
        <div class="spinner"></div>
    </div>

    <header>
        <div class="container header-content">
            <a href="#" class="logo" id="logo">
                <img src="logo.png" alt="BlogRack Logo">
                <span class="logo-text">BlogRack</span>
            </a>
            <nav>
                <ul>
                    <li><a href="#" id="homeLink">Home</a></li>
                    <li><a href="#" id="dashboardLink">Explore</a></li>
                    <li><a href="#" id="newPostLink">New Post</a></li>
                    <li id="authLinks">
                        <a href="#" id="loginLink" class="btn btn-outline">Login</a>
                        <a href="#" id="registerLink" class="btn btn-primary">Register</a>
                    </li>
                    <li id="userMenu" class="user-menu" style="display: none;">
                        <div class="user-avatar" id="userAvatar">U</div>
                        <div class="dropdown-menu" id="dropdownMenu">
                            <a href="#" id="profileLink"><i class="fas fa-user"></i>Profile</a>
                            <a href="#" id="myPostsLink"><i class="fas fa-file-alt"></i>My Posts</a>
                            <a href="#" id="logoutLink"><i class="fas fa-sign-out-alt"></i>Logout</a>
                        </div>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <main id="mainContent">
        <section class="hero" id="heroSection">
            <div class="container">
                <h1>The free blogging platform you deserve</h1>
                <p>An open source platform to share your thoughts, ideas, and stories with the world | A professional platform for bloggers to post | An organized platform for explorers to read and refer the content throughout the world</p>
                <div class="hero-buttons">
                    <a href="#" id="heroCta" class="btn btn-accent">Start Writing Now</a>
                    <a href="#" id="exploreBtn" class="btn btn-outline">Explore Blogs</a>
                </div>
            </div>
        </section>

        <section class="dashboard container" id="dashboardSection" style="display: none;">
            <h2 class="section-title">Latest Posts</h2>
            
            <div class="privacy-notice" id="privacyNotice" style="display: none;">
                <i class="fas fa-info-circle"></i> All posts are reviewed to ensure community guidelines are followed.
            </div>
            
            <div class="search-container">
                <input type="text" id="searchInput" class="search-input" placeholder="Search by title, author or keyword...">
                <button id="searchBtn" class="search-btn">
                    <i class="fas fa-search"></i> Search
                </button>
                <button id="clearSearchBtn" class="btn btn-outline" style="display: none;">
                    <i class="fas fa-times"></i> Clear
                </button>
            </div>
            
            <div class="filter-tabs" id="categoryFilters">
                <div class="filter-tab active" data-category="all">All</div>
                <div class="filter-tab" data-category="technology">Technology</div>
                <div class="filter-tab" data-category="travel">Travel</div>
                <div class="filter-tab" data-category="lifestyle">Lifestyle</div>
                <div class="filter-tab" data-category="business">Business</div>
                <div class="filter-tab" data-category="health">Health</div>
                <div class="filter-tab" data-category="education">Education</div>
                <div class="filter-tab" data-category="others">Others</div>
            </div>
            
            <div class="blog-grid" id="blogGrid">
                <!-- Blog posts will be dynamically inserted here -->
            </div>
        </section>

        <div class="auth-form" id="loginForm" style="display: none;">
            <h2>Login to Your Account</h2>
            <form id="loginFormElement">
                <div class="form-group">
                    <label for="loginEmail">Email</label>
                    <input type="email" id="loginEmail" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword">Password</label>
                    <input type="password" id="loginPassword" class="form-control" required>
                </div>
                <button type="submit" class="btn btn-primary btn-block">
                    <i class="fas fa-sign-in-alt"></i> Login
                </button>
                <div class="form-footer">
                    <p>Don't have an account? <a href="#" id="showRegister">Register here</a></p>
                </div>
            </form>
        </div>

        <div class="auth-form" id="registerForm" style="display: none;">
            <h2>Create an Account</h2>
            <form id="registerFormElement">
                <div class="form-group">
                    <label for="registerName">Full Name</label>
                    <input type="text" id="registerName" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="registerEmail">Email</label>
                    <input type="email" id="registerEmail" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="registerPassword">Password (min 6 characters)</label>
                    <input type="password" id="registerPassword" class="form-control" required minlength="6">
                </div>
                <div class="form-group">
                    <label for="registerConfirmPassword">Confirm Password</label>
                    <input type="password" id="registerConfirmPassword" class="form-control" required minlength="6">
                </div>
                <button type="submit" class="btn btn-primary btn-block">
                    <i class="fas fa-user-plus"></i> Register
                </button>
                <div class="form-footer">
                    <p>Already have an account? <a href="#" id="showLogin">Login here</a></p>
                </div>
            </form>
        </div>

        <div class="editor-container" id="editorSection" style="display: none;">
            <a href="#" class="back-to-dashboard" id="backToDashboard">
                <i class="fas fa-arrow-left"></i> Back to Dashboard
            </a>
            <h2 id="editorTitle">Create New Post</h2>
            <form id="blogForm">
                <input type="hidden" id="postId" value="">
                <input type="hidden" id="postRowIndex" value="">
                <div class="form-group">
                    <label for="blogTitle">Title</label>
                    <input type="text" id="blogTitle" class="form-control" placeholder="Enter a compelling title" required>
                </div>
                <div class="form-group">
                    <label for="metaTitle">Meta Title (for SEO)</label>
                    <input type="text" id="metaTitle" class="form-control" placeholder="Enter meta title for SEO">
                </div>
                <div class="form-group">
                    <label for="blogCategory">Category</label>
                    <div class="category-tags" id="categoryTags">
                        <div class="category-tag" data-category="technology">Technology</div>
                        <div class="category-tag" data-category="travel">Travel</div>
                        <div class="category-tag" data-category="lifestyle">Lifestyle</div>
                        <div class="category-tag" data-category="business">Business</div>
                        <div class="category-tag" data-category="health">Health</div>
                        <div class="category-tag" data-category="education">Education</div>
                        <div class="category-tag" data-category="others">Others</div>
                    </div>
                    <div class="custom-category" id="customCategoryDiv" style="display: none;">
                        <input type="text" id="customCategoryInput" placeholder="Please specify category..." maxlength="50">
                        <button type="button" id="customCategoryBtn">Set</button>
                    </div>
                    <input type="hidden" id="blogCategory" value="">
                </div>
                <div class="form-group">
                    <label for="blogImage">Featured Image URL (Optional)</label>
                    <input type="text" id="blogImage" class="form-control" placeholder="Paste image URL here">
                </div>
                <div class="form-group">
                    <label>Keywords (for SEO)</label>
                    <div class="keywords-container">
                        <input type="text" id="keyword1" class="form-control" placeholder="Keyword 1">
                        <input type="text" id="keyword2" class="form-control" placeholder="Keyword 2">
                        <input type="text" id="keyword3" class="form-control" placeholder="Keyword 3">
                        <input type="text" id="keyword4" class="form-control" placeholder="Keyword 4">
                        <input type="text" id="keyword5" class="form-control" placeholder="Keyword 5">
                    </div>
                </div>
                <div class="form-group">
                    <label><h3>Content</h3></label>
                    
                    <div class="editor-toolbar">
                        <div class="toolbar-group">
                            <button type="button" class="toolbar-btn" data-command="bold" title="Bold">
                                <i class="fas fa-bold"></i>
                            </button>
                            <button type="button" class="toolbar-btn" data-command="italic" title="Italic">
                                <i class="fas fa-italic"></i>
                            </button>
                            <button type="button" class="toolbar-btn" data-command="underline" title="Underline">
                                <i class="fas fa-underline"></i>
                            </button>
                            <button type="button" class="toolbar-btn" data-command="strikeThrough" title="Strikethrough">
                                <i class="fas fa-strikethrough"></i>
                            </button>
                        </div>

                        <div class="toolbar-group">
                            <select class="toolbar-select" id="headingSelect">
                                <option value="">Normal</option>
                                <option value="h1">Heading 1</option>
                                <option value="h2">Heading 2</option>
                                <option value="h3">Heading 3</option>
                                <option value="h4">Heading 4</option>
                                <option value="h5">Heading 5</option>
                                <option value="h6">Heading 6</option>
                            </select>
                        </div>

                        <div class="toolbar-group">
                            <button type="button" class="toolbar-btn" data-command="insertUnorderedList" title="Bullet List">
                                <i class="fas fa-list-ul"></i>
                            </button>
                            <button type="button" class="toolbar-btn" data-command="insertOrderedList" title="Numbered List">
                                <i class="fas fa-list-ol"></i>
                            </button>
                            <button type="button" class="toolbar-btn" data-command="outdent" title="Decrease Indent">
                                <i class="fas fa-outdent"></i>
                            </button>
                            <button type="button" class="toolbar-btn" data-command="indent" title="Increase Indent">
                                <i class="fas fa-indent"></i>
                            </button>
                        </div>

                        <div class="toolbar-group">
                            <button type="button" class="toolbar-btn" data-command="justifyLeft" title="Align Left">
                                <i class="fas fa-align-left"></i>
                            </button>
                            <button type="button" class="toolbar-btn" data-command="justifyCenter" title="Align Center">
                                <i class="fas fa-align-center"></i>
                            </button>
                            <button type="button" class="toolbar-btn" data-command="justifyRight" title="Align Right">
                                <i class="fas fa-align-right"></i>
                            </button>
                            <button type="button" class="toolbar-btn" data-command="justifyFull" title="Justify">
                                <i class="fas fa-align-justify"></i>
                            </button>
                        </div>

                        <div class="toolbar-group">
                            <button type="button" class="toolbar-btn" id="insertLink" title="Insert Link">
                                <i class="fas fa-link"></i>
                            </button>
                            <button type="button" class="toolbar-btn" id="insertImage" title="Insert Image">
                                <i class="fas fa-image"></i>
                            </button>
                            <button type="button" class="toolbar-btn" id="insertTable" title="Insert Table">
                                <i class="fas fa-table"></i>
                            </button>
                            <button type="button" class="toolbar-btn" data-command="formatBlock" data-value="blockquote" title="Quote">
                                <i class="fas fa-quote-left"></i>
                            </button>
                        </div>

                        <div class="toolbar-group">
                            <div class="color-picker" title="Text Color">
                                <input type="color" id="textColor" value="#000000">
                            </div>
                            <div class="color-picker" title="Background Color">
                                <input type="color" id="backColor" value="#ffffff">
                            </div>
                        </div>

                        <div class="toolbar-group">
                            <button type="button" class="toolbar-btn" data-command="undo" title="Undo">
                                <i class="fas fa-undo"></i>
                            </button>
                            <button type="button" class="toolbar-btn" data-command="redo" title="Redo">
                                <i class="fas fa-redo"></i>
                            </button>
                            <button type="button" class="toolbar-btn" id="clearFormat" title="Clear Formatting">
                                <i class="fas fa-remove-format"></i>
                            </button>
                        </div>
                    </div>

                    <div id="blogEditor" contenteditable="true" placeholder="Write your blog content here..."></div>
                </div>
                
                <button type="submit" class="btn btn-accent" id="publishBtn">
                    <i class="fas fa-paper-plane"></i> Publish Post
                </button>
                <div class="post-actions" id="editorActions" style="display: none; margin-top: 20px;">
                    <button type="button" id="unpublishBtn" class="btn btn-danger">
                        <i class="fas fa-trash"></i> Unpublish Post
                    </button>
                </div>
            </form>
        </div>

        <div class="blog-detail" id="blogDetail" style="display: none;">
            <a href="#" class="back-to-dashboard" id="backFromDetail">
                <i class="fas fa-arrow-left"></i> Back to Posts
            </a>
            <h1 class="blog-detail-title" id="detailTitle">Blog Title</h1>
            <div class="blog-detail-meta">
                <span id="detailAuthor">By Author</span>
                <span id="detailDate">Published on June 1, 2023</span>
            </div>
            <div class="blog-detail-category" id="detailCategory">Technology</div>
            <div class="blog-detail-content" id="detailContent">
                <p>Blog content goes here...</p>
            </div>
            <div class="post-actions" id="postActions" style="display: none; margin-top: 30px;">
                <button id="editPostBtn" class="btn btn-primary">
                    <i class="fas fa-edit"></i> Edit Post
                </button>
                <button id="deletePostBtn" class="btn btn-danger">
                    <i class="fas fa-trash"></i> Unpublish Post
                </button>
                <button id="sharePostBtn" class="btn btn-outline">
                    <i class="fas fa-share-alt"></i> Share Post
                </button>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <div class="footer-logo">
                        <img src="logo.png" alt="BlogRack Logo">
                        <span class="footer-logo-text">BlogRack</span>
                    </div>
                    <p>Professional blogging platform for content creators worldwide with:</p>
		    <ul><li>Rich text editor</li>
			<li>Real-time synchronization</li>
			<li>Search engine optimization</li>
			<li>And more......!</li?
		    </ul>
                </div>
                <div class="footer-column">
                    <h3>Quick links</h3>
                    <ul>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Explore blogs</a></li>
                        <li><a href="mailto:blograckconnect@gmail.com"><i class="fas fa-chevron-right"></i> Contact us</a>
  			<li><a href="https://mywebview.github.io/brpolicy/" class="privacy-link" id="privacyPolicyLink" target="_blank">🔏 Privacy policy</a>
</li>
                    </ul>
                </div>
               
                <div class="footer-column">
                    <h3>Newsletter</h3>
                    <p>Subscribe to get the latest updates</p>
                    <form id="newsletterForm">
                        <div class="form-group">
                            <input type="email" id="newsletterEmail" class="form-control" placeholder="Your email address" required>
                            <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 15px;">
                                <i class="fas fa-envelope"></i> Subscribe
                            </button>
                        </div>
                    </form>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 BlogRack. All rights reserved. Professional blogging platform for creators worldwide.</p>
            </div>
        </div>
    </footer>
    <div class="toast" id="toast">
        <i class="fas fa-check-circle"></i>
        <span id="toastMessage">Operation successful!</span>
    </div>

    <script>
        // Sheetson API Configuration
        const SHEETSON_API_KEY = 'iK6OKl5Bh7qGYPpGvkh_6vYpUVcZmqjHODj1ZCFHzQ3aB3BkGOCLVfWJ4h0';
        const READONLY_API_KEY = 'dUkYYZ3Ay_8n3Rz1AxCO_R4gpsFOKFFcIAX_2IS7a7WNkD5ApctGfW_liUmoQg';
        const SPREADSHEET_ID = '1s3RWBJSFuwCetUFNSgtVrJVOqopY0thij0Y3SOjnSB4';
        
        // Sheet names
        const USERS_SHEET = 'users';
        const POSTS_SHEET = 'posts';
        const NEWSLETTER_SHEET = 'newsletter';
        
        // API URLs
        const API_BASE = 'https://api.sheetson.com/v2';
        const USERS_API = `${API_BASE}/sheets/${USERS_SHEET}`;
        const POSTS_API = `${API_BASE}/sheets/${POSTS_SHEET}`;
        const NEWSLETTER_API = `${API_BASE}/sheets/${NEWSLETTER_SHEET}`;
        
        // Headers for API requests
        const API_HEADERS = {
            'Authorization': `Bearer ${SHEETSON_API_KEY}`,
            'X-Spreadsheet-Id': SPREADSHEET_ID,
            'Content-Type': 'application/json',
            'Accept': 'application/json'
        };
        
        const READONLY_HEADERS = {
            'Authorization': `Bearer ${READONLY_API_KEY}`,
            'X-Spreadsheet-Id': SPREADSHEET_ID,
            'Content-Type': 'application/json',
            'Accept': 'application/json'
        };

        class BlogRackApp {
            constructor() {
                this.currentUser = null;
                this.blogPosts = [];
                this.currentPostId = null;
                this.currentFilter = 'all';
                this.currentSearchTerm = '';
                this.isMyPostsView = false;
                this.isEditing = false;
                this.refreshInterval = null;
                this.isOnline = true;
                
                this.initElements();
                this.initEventListeners();
                this.initRichTextEditor();
                this.checkAuthState();
                this.showHomePage();
                this.startRealtimeSync();
            }
            
            startRealtimeSync() {
                console.log('🔄 Starting real-time sync...');
                
                this.loadDataFromAPI();
                
                this.refreshInterval = setInterval(() => {
                    this.loadDataFromAPI(false);
                }, 10000);
            }
            
            stopRealtimeSync() {
                if (this.refreshInterval) {
                    clearInterval(this.refreshInterval);
                    this.refreshInterval = null;
                }
            }
            
            async loadDataFromAPI(showLoading = true) {
                console.log('📡 Fetching latest data from API...');
                
                try {
                    if (showLoading) {
                        this.showLoading();
                    }
                    
                    const timestamp = Date.now();
                    const postsResponse = await fetch(`${POSTS_API}?limit=100&_t=${timestamp}`, {
                        headers: READONLY_HEADERS,
                        cache: 'no-cache'
                    });
                    
                    if (!postsResponse.ok) {
                        throw new Error(`API Error: ${postsResponse.status} - ${postsResponse.statusText}`);
                    }
                    
                    const postsData = await postsResponse.json();
                    console.log('📊 Fresh data received:', postsData);
                    
                    if (postsData && postsData.results && Array.isArray(postsData.results)) {
                        console.log(`✅ Processing ${postsData.results.length} posts from sheet`);
                        
                        this.blogPosts = [];
                        
                        this.blogPosts = postsData.results.map((post, index) => {
                            const postId = post.rowIndex || post.id || `post_${Date.now()}_${index}`;
                            
                            return {
                                id: postId,
                                rowIndex: post.rowIndex,
                                title: post.title || 'Untitled Post',
                                metaTitle: post.metaTitle || post.title || 'Untitled Post',
                                content: post.content || '<p>No content available</p>',
                                category: post.category || 'General',
                                image: post.image || 'https://images.unsplash.com/photo-1499750310107-5fef28a66643?ixlib=rb-4.0.3&auto=format&fit=crop&w=1470&q=80',
                                authorId: post.authorId || 'unknown',
                                authorName: post.authorName || 'Anonymous',
                                date: post.date ? new Date(post.date).toLocaleDateString('en-US', { 
                                    year: 'numeric', 
                                    month: 'long', 
                                    day: 'numeric' 
                                }) : new Date().toLocaleDateString('en-US', { 
                                    year: 'numeric', 
                                    month: 'long', 
                                    day: 'numeric' 
                                }),
                                keyword1: post.keyword1 || '',
                                keyword2: post.keyword2 || '',
                                keyword3: post.keyword3 || '',
                                keyword4: post.keyword4 || '',
                                keyword5: post.keyword5 || ''
                            };
                        });
                        
                        console.log('✅ Fresh blog posts loaded:', this.blogPosts.length);
                        this.renderBlogPosts();
                    } else {
                        console.log('⚠️ No posts found in API response');
                        this.blogPosts = [];
                        this.renderBlogPosts();
                    }
                    
                } catch (error) {
                    console.error('❌ Error loading data from API:', error);
                    
                    if (showLoading) {
                        this.showToast(`Failed to load latest data: ${error.message}`, 'error');
                    }
                } finally {
                    if (showLoading) {
                        this.hideLoading();
                    }
                }
            }
            
            async handleNewsletterSubscription() {
                const email = document.getElementById('newsletterEmail').value.trim();
                
                if (!email) {
                    this.showToast('Please enter your email address', 'error');
                    return;
                }
                
                if (!this.isValidEmail(email)) {
                    this.showToast('Please enter a valid email address', 'error');
                    return;
                }
                
                try {
                    this.showLoading();
                    
                    const checkResponse = await fetch(`${NEWSLETTER_API}?where=${encodeURIComponent(JSON.stringify({emailID: email}))}`, {
                        headers: READONLY_HEADERS
                    });
                    
                    if (checkResponse.ok) {
                        const checkData = await checkResponse.json();
                        
                        if (checkData.results && checkData.results.length > 0) {
                            this.showToast('Email already subscribed to newsletter!', 'error');
                            document.getElementById('newsletterEmail').value = '';
                            return;
                        }
                    }
                    
                    const newsletterData = {
                        emailID: email,
                        subscribedAt: new Date().toISOString()
                    };
                    
                    const response = await fetch(NEWSLETTER_API, {
                        method: 'POST',
                        headers: API_HEADERS,
                        body: JSON.stringify(newsletterData)
                    });
                    
                    if (!response.ok) {
                        throw new Error(`Newsletter subscription failed: ${response.status}`);
                    }
                    
                    document.getElementById('newsletterEmail').value = '';
                    this.showToast('Successfully subscribed to newsletter! 📧', 'success');
                    
                } catch (error) {
                    console.error('❌ Newsletter subscription error:', error);
                    this.showToast(`Subscription failed: ${error.message}`, 'error');
                } finally {
                    this.hideLoading();
                }
            }
            
            isValidEmail(email) {
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return emailRegex.test(email);
            }
            
            // Share blog functionality
            shareBlog(postId) {
                const baseURL = window.location.origin + window.location.pathname;
                const shareURL = `${baseURL}?post=${encodeURIComponent(postId)}`;
                
                if (navigator.share) {
                    navigator.share({
                        title: 'Check out this blog post from BlogRack',
                        url: shareURL
                    }).catch(err => console.log('Error sharing:', err));
                } else {
                    // Fallback to clipboard
                    navigator.clipboard.writeText(shareURL).then(() => {
                        this.showToast('Blog link copied to clipboard! 📋', 'success');
                    }).catch(() => {
                        // Final fallback - show URL in alert
                        alert(`Share this blog: ${shareURL}`);
                    });
                }
            }
            
            initElements() {
                // Auth elements
                this.loginLink = document.getElementById('loginLink');
                this.registerLink = document.getElementById('registerLink');
                this.loginForm = document.getElementById('loginForm');
                this.registerForm = document.getElementById('registerForm');
                this.loginFormElement = document.getElementById('loginFormElement');
                this.registerFormElement = document.getElementById('registerFormElement');
                this.showLogin = document.getElementById('showLogin');
                this.showRegister = document.getElementById('showRegister');
                this.userMenu = document.getElementById('userMenu');
                this.userAvatar = document.getElementById('userAvatar');
                this.dropdownMenu = document.getElementById('dropdownMenu');
                this.logoutLink = document.getElementById('logoutLink');
                this.profileLink = document.getElementById('profileLink');
                this.myPostsLink = document.getElementById('myPostsLink');
                this.authLinks = document.getElementById('authLinks');

                // Form inputs
                this.loginEmail = document.getElementById('loginEmail');
                this.loginPassword = document.getElementById('loginPassword');
                this.registerName = document.getElementById('registerName');
                this.registerEmail = document.getElementById('registerEmail');
                this.registerPassword = document.getElementById('registerPassword');
                this.registerConfirmPassword = document.getElementById('registerConfirmPassword');

                // Navigation elements
                this.homeLink = document.getElementById('homeLink');
                this.dashboardLink = document.getElementById('dashboardLink');
                this.newPostLink = document.getElementById('newPostLink');
                this.heroCta = document.getElementById('heroCta');
                this.exploreBtn = document.getElementById('exploreBtn');
                this.logo = document.getElementById('logo');
                this.heroSection = document.getElementById('heroSection');
                this.backToDashboard = document.getElementById('backToDashboard');
                this.backFromDetail = document.getElementById('backFromDetail');

                // Content sections
                this.mainContent = document.getElementById('mainContent');
                this.dashboardSection = document.getElementById('dashboardSection');
                this.blogGrid = document.getElementById('blogGrid');
                this.editorSection = document.getElementById('editorSection');
                this.blogDetail = document.getElementById('blogDetail');

                // Editor elements
                this.blogForm = document.getElementById('blogForm');
                this.postId = document.getElementById('postId');
                this.postRowIndex = document.getElementById('postRowIndex');
                this.editorTitle = document.getElementById('editorTitle');
                this.blogTitle = document.getElementById('blogTitle');
                this.metaTitle = document.getElementById('metaTitle');
                this.blogEditor = document.getElementById('blogEditor');
                this.blogCategory = document.getElementById('blogCategory');
                this.blogImage = document.getElementById('blogImage');
                this.categoryTags = document.getElementById('categoryTags');
                this.customCategoryDiv = document.getElementById('customCategoryDiv');
                this.customCategoryInput = document.getElementById('customCategoryInput');
                this.customCategoryBtn = document.getElementById('customCategoryBtn');
                this.keyword1 = document.getElementById('keyword1');
                this.keyword2 = document.getElementById('keyword2');
                this.keyword3 = document.getElementById('keyword3');
                this.keyword4 = document.getElementById('keyword4');
                this.keyword5 = document.getElementById('keyword5');
                this.privacyNotice = document.getElementById('privacyNotice');
                this.publishBtn = document.getElementById('publishBtn');
                this.editorActions = document.getElementById('editorActions');

                // Blog detail elements
                this.detailTitle = document.getElementById('detailTitle');
                this.detailAuthor = document.getElementById('detailAuthor');
                this.detailDate = document.getElementById('detailDate');
                this.detailCategory = document.getElementById('detailCategory');
                this.detailContent = document.getElementById('detailContent');
                this.postActions = document.getElementById('postActions');
                this.editPostBtn = document.getElementById('editPostBtn');
                this.deletePostBtn = document.getElementById('deletePostBtn');
                this.sharePostBtn = document.getElementById('sharePostBtn');
                this.unpublishBtn = document.getElementById('unpublishBtn');

                // Search elements
                this.searchInput = document.getElementById('searchInput');
                this.searchBtn = document.getElementById('searchBtn');
                this.clearSearchBtn = document.getElementById('clearSearchBtn');

                // Category filters
                this.categoryFilters = document.getElementById('categoryFilters');

                // Newsletter elements
                this.newsletterForm = document.getElementById('newsletterForm');

                // Toast
                this.toast = document.getElementById('toast');
                this.toastMessage = document.getElementById('toastMessage');

                // Loading spinner
                this.loadingSpinner = document.getElementById('loadingSpinner');
            }
            
            initRichTextEditor() {
                // Initialize toolbar buttons
                const toolbarBtns = document.querySelectorAll('.toolbar-btn[data-command]');
                toolbarBtns.forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.preventDefault();
                        const command = btn.dataset.command;
                        const value = btn.dataset.value || null;
                        this.execCommand(command, value);
                        this.updateToolbarState();
                    });
                });

                // Heading selector
                const headingSelect = document.getElementById('headingSelect');
                headingSelect.addEventListener('change', (e) => {
                    const value = e.target.value;
                    if (value) {
                        this.execCommand('formatBlock', `<${value}>`);
                    } else {
                        this.execCommand('formatBlock', '<p>');
                    }
                    this.updateToolbarState();
                });

                // Color pickers
                const textColor = document.getElementById('textColor');
                const backColor = document.getElementById('backColor');
                
                textColor.addEventListener('change', (e) => {
                    this.execCommand('foreColor', e.target.value);
                });
                
                backColor.addEventListener('change', (e) => {
                    this.execCommand('hiliteColor', e.target.value);
                });

                // Special buttons
                document.getElementById('insertLink').addEventListener('click', (e) => {
                    e.preventDefault();
                    this.insertLink();
                });

                document.getElementById('insertImage').addEventListener('click', (e) => {
                    e.preventDefault();
                    this.insertImage();
                });

                document.getElementById('insertTable').addEventListener('click', (e) => {
                    e.preventDefault();
                    this.insertTable();
                });

                document.getElementById('clearFormat').addEventListener('click', (e) => {
                    e.preventDefault();
                    this.execCommand('removeFormat');
                    this.updateToolbarState();
                });

                // Update toolbar state on selection change
                this.blogEditor.addEventListener('mouseup', () => this.updateToolbarState());
                this.blogEditor.addEventListener('keyup', () => this.updateToolbarState());
                this.blogEditor.addEventListener('focus', () => this.updateToolbarState());

                // Handle paste events to clean up formatting
                this.blogEditor.addEventListener('paste', (e) => {
                    setTimeout(() => this.cleanupContent(), 10);
                });

                // Prevent toolbar from taking focus
                document.querySelector('.editor-toolbar').addEventListener('mousedown', (e) => {
                    e.preventDefault();
                });
            }

            execCommand(command, value = null) {
                this.blogEditor.focus();
                
                try {
                    document.execCommand(command, false, value);
                } catch (e) {
                    console.warn('Command not supported:', command, e);
                }
            }

            updateToolbarState() {
                const commands = ['bold', 'italic', 'underline', 'strikeThrough'];
                
                commands.forEach(command => {
                    const btn = document.querySelector(`[data-command="${command}"]`);
                    if (btn) {
                        try {
                            const isActive = document.queryCommandState(command);
                            btn.classList.toggle('active', isActive);
                        } catch (e) {
                            // Command not supported
                        }
                    }
                });

                const headingSelect = document.getElementById('headingSelect');
                const parentElement = window.getSelection().anchorNode?.parentElement;
                if (parentElement) {
                    const tagName = parentElement.tagName?.toLowerCase();
                    if (['h1', 'h2', 'h3', 'h4', 'h5', 'h6'].includes(tagName)) {
                        headingSelect.value = tagName;
                    } else {
                        headingSelect.value = '';
                    }
                }
            }

            insertLink() {
                const selection = window.getSelection();
                if (selection.rangeCount === 0) return;

                const range = selection.getRangeAt(0);
                const selectedText = range.toString();
                
                const url = prompt('Enter the URL:', 'https://');
                if (url && url !== 'https://') {
                    if (selectedText) {
                        this.execCommand('createLink', url);
                    } else {
                        const linkText = prompt('Enter link text:', url);
                        if (linkText) {
                            const link = document.createElement('a');
                            link.href = url;
                            link.textContent = linkText;
                            link.target = '_blank';
                            range.insertNode(link);
                            range.collapse(false);
                            selection.removeAllRanges();
                            selection.addRange(range);
                        }
                    }
                }
            }

            insertImage() {
                const url = prompt('Enter image URL:', 'https://');
                if (url && url !== 'https://') {
                    const img = document.createElement('img');
                    img.src = url;
                    img.alt = 'Blog image';
                    img.style.maxWidth = '100%';
                    img.style.height = 'auto';
                    
                    const selection = window.getSelection();
                    if (selection.rangeCount > 0) {
                        const range = selection.getRangeAt(0);
                        range.insertNode(img);
                        range.collapse(false);
                        selection.removeAllRanges();
                        selection.addRange(range);
                    } else {
                        this.blogEditor.appendChild(img);
                    }
                }
            }

            insertTable() {
                const rows = prompt('Number of rows:', '3');
                const cols = prompt('Number of columns:', '3');
                
                if (rows && cols && !isNaN(rows) && !isNaN(cols)) {
                    const table = document.createElement('table');
                    table.style.width = '100%';
                    table.style.borderCollapse = 'collapse';
                    table.style.margin = '15px 0';
                    
                    for (let i = 0; i < parseInt(rows); i++) {
                        const row = document.createElement('tr');
                        for (let j = 0; j < parseInt(cols); j++) {
                            const cell = document.createElement(i === 0 ? 'th' : 'td');
                            cell.style.border = '1px solid #dfe6e9';
                            cell.style.padding = '8px 12px';
                            cell.textContent = i === 0 ? `Header ${j + 1}` : `Cell ${i}-${j + 1}`;
                            row.appendChild(cell);
                        }
                        table.appendChild(row);
                    }
                    
                    const selection = window.getSelection();
                    if (selection.rangeCount > 0) {
                        const range = selection.getRangeAt(0);
                        range.insertNode(table);
                        range.collapse(false);
                        selection.removeAllRanges();
                        selection.addRange(range);
                    } else {
                        this.blogEditor.appendChild(table);
                    }
                }
            }

            cleanupContent() {
                const editor = this.blogEditor;
                const elements = editor.querySelectorAll('*');
                
                elements.forEach(el => {
                    const style = el.getAttribute('style');
                    if (style) {
                        const allowedStyles = ['color', 'background-color', 'font-weight', 'font-style', 'text-decoration'];
                        const styles = style.split(';').filter(s => {
                            const prop = s.split(':')[0]?.trim().toLowerCase();
                            return allowedStyles.includes(prop);
                        });
                        
                        if (styles.length > 0) {
                            el.setAttribute('style', styles.join(';'));
                        } else {
                            el.removeAttribute('style');
                        }
                    }
                    
                    const attributesToRemove = ['class', 'id', 'data-*'];
                    attributesToRemove.forEach(attr => {
                        if (attr.includes('*')) {
                            Array.from(el.attributes).forEach(a => {
                                if (a.name.startsWith('data-')) {
                                    el.removeAttribute(a.name);
                                }
                            });
                        } else {
                            el.removeAttribute(attr);
                        }
                    });
                });
            }
            
            initEventListeners() {
                // Newsletter subscription
                this.newsletterForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.handleNewsletterSubscription();
                });

                // Custom category functionality
                this.customCategoryBtn.addEventListener('click', () => {
                    const customCategory = this.customCategoryInput.value.trim();
                    if (customCategory) {
                        this.setCustomCategory(customCategory);
                    } else {
                        this.showToast('Please enter a category name', 'error');
                    }
                });

                this.customCategoryInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        const customCategory = this.customCategoryInput.value.trim();
                        if (customCategory) {
                            this.setCustomCategory(customCategory);
                        } else {
                            this.showToast('Please enter a category name', 'error');
                        }
                    }
                });

                // Auth events
                this.loginLink.addEventListener('click', (e) => {
                    e.preventDefault();
                    this.showLoginForm();
                });
                
                this.registerLink.addEventListener('click', (e) => {
                    e.preventDefault();
                    this.showRegisterForm();
                });
                
                this.showLogin.addEventListener('click', (e) => {
                    e.preventDefault();
                    this.showLoginForm();
                });
                
                this.showRegister.addEventListener('click', (e) => {
                    e.preventDefault();
                    this.showRegisterForm();
                });
                
                this.loginFormElement.addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.handleLogin();
                });
                
                this.registerFormElement.addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.handleRegister();
                });
                
                this.logoutLink.addEventListener('click', (e) => {
                    e.preventDefault();
                    this.handleLogout();
                });

                // Navigation events
                this.homeLink.addEventListener('click', (e) => {
                    e.preventDefault();
                    this.showHomePage();
                });
                
                this.dashboardLink.addEventListener('click', (e) => {
                    e.preventDefault();
                    this.showDashboard();
                });
                
                this.newPostLink.addEventListener('click', (e) => {
                    e.preventDefault();
                    this.showEditor();
                });
                
                this.heroCta.addEventListener('click', (e) => {
                    e.preventDefault();
                    if (this.currentUser) {
                        this.showEditor();
                    } else {
                        this.showLoginForm();
                    }
                });
                
                this.exploreBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    this.showDashboard();
                });
                
                this.logo.addEventListener('click', (e) => {
                    e.preventDefault();
                    this.showHomePage();
                });
                
                this.backToDashboard.addEventListener('click', (e) => {
                    e.preventDefault();
                    this.showDashboard();
                });
                
                this.backFromDetail.addEventListener('click', (e) => {
                    e.preventDefault();
                    this.showDashboard();
                });

                // Editor events
                this.blogForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    if (this.isEditing) {
                        this.handleUpdatePost();
                    } else {
                        this.handlePublishPost();
                    }
                });
                
                Array.from(this.categoryTags.children).forEach(tag => {
                    tag.addEventListener('click', () => {
                        this.selectCategory(tag);
                    });
                });
                
                this.unpublishBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    this.handleDeletePost();
                });

                // User menu events
                this.userAvatar.addEventListener('click', () => {
                    this.dropdownMenu.classList.toggle('show');
                });
                
                window.addEventListener('click', (e) => {
                    if (!e.target.matches('.user-avatar')) {
                        if (this.dropdownMenu.classList.contains('show')) {
                            this.dropdownMenu.classList.remove('show');
                        }
                    }
                });

                // Category filter events
                Array.from(this.categoryFilters.children).forEach(filter => {
                    filter.addEventListener('click', () => {
                        this.filterPosts(filter);
                    });
                });

                // Search events
                this.searchBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    this.handleSearch();
                });

                this.searchInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        this.handleSearch();
                    }
                });

                this.clearSearchBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    this.clearSearch();
                });

                // My posts link
                this.myPostsLink.addEventListener('click', (e) => {
                    e.preventDefault();
                    this.showMyPosts();
                });

                // Edit and delete buttons
                this.editPostBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    this.showEditorForEdit();
                });
                
                this.deletePostBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    this.handleDeletePost();
                });

                // Share button
                this.sharePostBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    this.shareBlog(this.currentPostId);
                });

                // Page visibility change - refresh when user comes back to tab
                document.addEventListener('visibilitychange', () => {
                    if (!document.hidden) {
                        console.log('🔄 Page visible again, refreshing data...');
                        this.loadDataFromAPI(false);
                    }
                });
            }

            setCustomCategory(categoryName) {
                Array.from(this.categoryTags.children).forEach(tag => {
                    tag.classList.remove('active');
                });
                
                this.blogCategory.value = categoryName;
                this.customCategoryDiv.style.display = 'none';
                
                const tempTag = document.createElement('div');
                tempTag.className = 'category-tag active';
                tempTag.textContent = categoryName;
                tempTag.style.background = 'linear-gradient(135deg, var(--info) 0%, #74b9ff 100%)';
                tempTag.style.color = 'white';
                
                const othersTag = document.querySelector('[data-category="others"]');
                othersTag.parentNode.insertBefore(tempTag, othersTag);
                
                this.customCategoryInput.value = '';
                this.showToast(`Custom category "${categoryName}" selected`, 'success');
            }
            
            async handleRegister() {
                const name = this.registerName.value.trim();
                const email = this.registerEmail.value.trim();
                const password = this.registerPassword.value;
                const confirmPassword = this.registerConfirmPassword.value;
                
                if (!name || !email || !password || !confirmPassword) {
                    this.showToast('Please fill in all fields', 'error');
                    return;
                }
                
                if (password !== confirmPassword) {
                    this.showToast('Passwords do not match', 'error');
                    return;
                }
                
                if (password.length < 6) {
                    this.showToast('Password must be at least 6 characters', 'error');
                    return;
                }
                
                try {
                    this.showLoading();
                    
                    const checkResponse = await fetch(`${USERS_API}?where=${encodeURIComponent(JSON.stringify({email}))}`, {
                        headers: READONLY_HEADERS
                    });
                    
                    if (checkResponse.ok) {
                        const checkData = await checkResponse.json();
                        
                        if (checkData.results && checkData.results.length > 0) {
                            this.showToast('Email already registered', 'error');
                            return;
                        }
                    }
                    
                    const newUser = {
                        name,
                        email,
                        password,
                        createdAt: new Date().toISOString()
                    };
                    
                    const registerResponse = await fetch(USERS_API, {
                        method: 'POST',
                        headers: API_HEADERS,
                        body: JSON.stringify(newUser)
                    });
                    
                    if (!registerResponse.ok) {
                        throw new Error(`Registration failed: ${registerResponse.status}`);
                    }
                    
                    const userData = await registerResponse.json();
                    
                    this.currentUser = {
                        id: userData.rowIndex || userData.id,
                        name: userData.name,
                        email: userData.email
                    };
                    
                    localStorage.setItem('blograck-current-user', JSON.stringify(this.currentUser));
                    this.updateAuthUI();
                    
                    this.registerName.value = '';
                    this.registerEmail.value = '';
                    this.registerPassword.value = '';
                    this.registerConfirmPassword.value = '';
                    
                    this.showDashboard();
                    this.showToast('Registration successful! Welcome to BlogRack', 'success');
                    
                } catch (error) {
                    console.error('❌ Registration error:', error);
                    this.showToast(`Registration failed: ${error.message}`, 'error');
                } finally {
                    this.hideLoading();
                }
            }
            
            async handleLogin() {
                const email = this.loginEmail.value.trim();
                const password = this.loginPassword.value;
                
                if (!email || !password) {
                    this.showToast('Please fill in all fields', 'error');
                    return;
                }
                
                try {
                    this.showLoading();
                    const response = await fetch(`${USERS_API}?where=${encodeURIComponent(JSON.stringify({email, password}))}`, {
                        headers: READONLY_HEADERS
                    });
                    
                    if (!response.ok) {
                        throw new Error(`Login failed: ${response.status}`);
                    }
                    
                    const data = await response.json();

                    if (data.results && data.results.length > 0) {
                        const user = data.results[0];
                        this.currentUser = {
                            id: user.rowIndex || user.id,
                            name: user.name,
                            email: user.email
                        };
                        
                        localStorage.setItem('blograck-current-user', JSON.stringify(this.currentUser));
                        this.updateAuthUI();
                        
                        this.loginEmail.value = '';
                        this.loginPassword.value = '';
                        
                        this.showDashboard();
                        this.showToast(`Welcome back, ${user.name}!`, 'success');
                        
                        await this.loadDataFromAPI();
                    } else {
                        this.showToast('Invalid email or password', 'error');
                    }

                } catch (error) {
                    console.error('❌ Login error:', error);
                    this.showToast(`Login failed: ${error.message}`, 'error');
                } finally {
                    this.hideLoading();
                }
            }
            
            async handlePublishPost() {
                if (!this.currentUser) {
                    this.showToast('Please login to publish a post', 'error');
                    return;
                }
                
                const title = this.blogTitle.value.trim();
                const metaTitle = this.metaTitle.value.trim();
                const content = this.blogEditor.innerHTML.trim();
                const category = this.blogCategory.value;
                const image = this.blogImage.value.trim();
                
                if (!title || !content || content === '<br>' || content === '<p></p>' || !category) {
                    this.showToast('Please fill in all required fields (title, content, category)', 'error');
                    return;
                }
                
                try {
                    this.showLoading();
                    
                    this.cleanupContent();
                    
                    const newPost = {
                        title,
                        metaTitle: metaTitle || title,
                        content: this.blogEditor.innerHTML,
                        category,
                        image: image || 'https://images.unsplash.com/photo-1499750310107-5fef28a66643?ixlib=rb-4.0.3&auto=format&fit=crop&w=1470&q=80',
                        authorId: this.currentUser.email,
                        authorName: this.currentUser.name,
                        date: new Date().toISOString(),
                        keyword1: this.keyword1.value.trim() || '',
                        keyword2: this.keyword2.value.trim() || '',
                        keyword3: this.keyword3.value.trim() || '',
                        keyword4: this.keyword4.value.trim() || '',
                        keyword5: this.keyword5.value.trim() || ''
                    };
                    
                    console.log('📝 Publishing post:', newPost);
                    
                    const response = await fetch(POSTS_API, {
                        method: 'POST',
                        headers: API_HEADERS,
                        body: JSON.stringify(newPost)
                    });
                    
                    if (!response.ok) {
                        throw new Error(`Failed to publish post: ${response.status}`);
                    }
                    
                    const postData = await response.json();
                    console.log('✅ Post published successfully:', postData);
                    
                    this.resetEditorForm();
                    this.showDashboard();
                    this.showToast('Post published successfully!', 'success');
                    
                    await this.loadDataFromAPI(false);
                    
                } catch (error) {
                    console.error('❌ Publish error:', error);
                    this.showToast(`Failed to publish post: ${error.message}`, 'error');
                } finally {
                    this.hideLoading();
                }
            }
            
            async handleUpdatePost() {
                if (!this.currentUser || !this.postRowIndex.value) {
                    this.showToast('Please login to edit a post', 'error');
                    return;
                }
                
                const title = this.blogTitle.value.trim();
                const metaTitle = this.metaTitle.value.trim();
                const content = this.blogEditor.innerHTML.trim();
                const category = this.blogCategory.value;
                const image = this.blogImage.value.trim();
                
                if (!title || !content || content === '<br>' || content === '<p></p>' || !category) {
                    this.showToast('Please fill in all required fields', 'error');
                    return;
                }
                
                try {
                    this.showLoading();
                    
                    this.cleanupContent();
                    
                    const updatedPost = {
                        title,
                        metaTitle: metaTitle || title,
                        content: this.blogEditor.innerHTML,
                        category,
                        image: image || 'https://images.unsplash.com/photo-1499750310107-5fef28a66643?ixlib=rb-4.0.3&auto=format&fit=crop&w=1470&q=80',
                        keyword1: this.keyword1.value.trim() || '',
                        keyword2: this.keyword2.value.trim() || '',
                        keyword3: this.keyword3.value.trim() || '',
                        keyword4: this.keyword4.value.trim() || '',
                        keyword5: this.keyword5.value.trim() || ''
                    };
                    
                    const response = await fetch(`${POSTS_API}/${this.postRowIndex.value}`, {
                        method: 'PATCH',
                        headers: API_HEADERS,
                        body: JSON.stringify(updatedPost)
                    });
                    
                    if (!response.ok) {
                        throw new Error(`Failed to update post: ${response.status}`);
                    }
                    
                    this.resetEditorForm();
                    this.showDashboard();
                    this.showToast('Post updated successfully!', 'success');
                    
                    await this.loadDataFromAPI(false);

                } catch (error) {
                    console.error('❌ Update error:', error);
                    this.showToast(`Failed to update post: ${error.message}`, 'error');
                } finally {
                    this.hideLoading();
                }
            }
            
            async handleDeletePost() {
                if (!this.currentPostId) return;
                
                if (!confirm('Are you sure you want to unpublish this post? This action cannot be undone.')) {
                    return;
                }
                
                const post = this.blogPosts.find(p => p.id == this.currentPostId);
                if (!post || !post.rowIndex) {
                    this.showToast('Cannot delete post: missing row information', 'error');
                    return;
                }
                
                try {
                    this.showLoading();
                    
                    console.log('🗑️ Deleting post with rowIndex:', post.rowIndex);
                    
                    const response = await fetch(`${POSTS_API}/${post.rowIndex}`, {
                        method: 'DELETE',
                        headers: API_HEADERS
                    });
                    
                    if (!response.ok) {
                        throw new Error(`Failed to delete post: ${response.status}`);
                    }
                    
                    console.log('✅ Post deleted successfully from sheet');
                    
                    this.showDashboard();
                    this.showToast('Post unpublished successfully', 'success');
                    
                    await this.loadDataFromAPI(false);
                    
                } catch (error) {
                    console.error('❌ Delete error:', error);
                    this.showToast(`Failed to unpublish post: ${error.message}`, 'error');
                } finally {
                    this.hideLoading();
                }
            }
            
            resetEditorForm() {
                this.blogTitle.value = '';
                this.metaTitle.value = '';
                this.blogEditor.innerHTML = '';
                this.blogImage.value = '';
                this.keyword1.value = '';
                this.keyword2.value = '';
                this.keyword3.value = '';
                this.keyword4.value = '';
                this.keyword5.value = '';
                Array.from(this.categoryTags.children).forEach(tag => {
                    tag.classList.remove('active');
                });
                
                const tempTags = document.querySelectorAll('.category-tag:not([data-category])');
                tempTags.forEach(tag => tag.remove());
                
                this.blogCategory.value = '';
                this.postId.value = '';
                this.postRowIndex.value = '';
                this.isEditing = false;
                this.editorTitle.textContent = 'Create New Post';
                this.publishBtn.innerHTML = '<i class="fas fa-paper-plane"></i> Publish Post';
                this.editorActions.style.display = 'none';
                this.customCategoryDiv.style.display = 'none';
                
                document.querySelectorAll('.toolbar-btn.active').forEach(btn => {
                    btn.classList.remove('active');
                });
                document.getElementById('headingSelect').value = '';
                document.getElementById('textColor').value = '#000000';
                document.getElementById('backColor').value = '#ffffff';
            }
            
            checkAuthState() {
                const user = JSON.parse(localStorage.getItem('blograck-current-user') || 'null');
                if (user) {
                    this.currentUser = user;
                    this.updateAuthUI();
                }
            }
            
            updateAuthUI() {
                if (this.currentUser) {
                    this.authLinks.style.display = 'none';
                    this.userMenu.style.display = 'block';
                    this.userAvatar.textContent = this.currentUser.name.charAt(0).toUpperCase();
                    this.privacyNotice.style.display = 'block';
                } else {
                    this.authLinks.style.display = 'block';
                    this.userMenu.style.display = 'none';
                    this.privacyNotice.style.display = 'none';
                }
            }
            
            showHomePage() {
                this.hideAllSections();
                this.heroSection.style.display = 'block';
                this.dashboardSection.style.display = 'block';
                this.isMyPostsView = false;
                this.renderBlogPosts();
            }
            
            showDashboard() {
                this.hideAllSections();
                this.dashboardSection.style.display = 'block';
                this.isMyPostsView = false;
                this.renderBlogPosts();
            }
            
            showLoginForm() {
                this.hideAllSections();
                this.loginForm.style.display = 'block';
            }
            
            showRegisterForm() {
                this.hideAllSections();
                this.registerForm.style.display = 'block';
            }
            
            showEditor() {
                if (!this.currentUser) {
                    this.showLoginForm();
                    this.showToast('Please login to create a post', 'error');
                    return;
                }
                this.hideAllSections();
                this.editorSection.style.display = 'block';
                this.resetEditorForm();
                
                setTimeout(() => {
                    this.blogEditor.focus();
                }, 100);
            }
            
            showEditorForEdit() {
                const post = this.blogPosts.find(p => p.id == this.currentPostId);
                if (!post) {
                    this.showToast('Post not found', 'error');
                    return;
                }
                
                this.hideAllSections();
                this.editorSection.style.display = 'block';
                this.isEditing = true;
                this.editorTitle.textContent = 'Edit Post';
                this.publishBtn.innerHTML = '<i class="fas fa-save"></i> Update Post';
                this.editorActions.style.display = 'flex';
                
                this.postId.value = this.currentPostId;
                this.postRowIndex.value = post.rowIndex;
                this.blogTitle.value = post.title;
                this.metaTitle.value = post.metaTitle;
                
                const predefinedCategories = ['technology', 'travel', 'lifestyle', 'business', 'health', 'education', 'others'];
                const postCategory = post.category.toLowerCase();
                
                Array.from(this.categoryTags.children).forEach(tag => {
                    tag.classList.remove('active');
                    if (tag.dataset.category === postCategory) {
                        tag.classList.add('active');
                    }
                });
                
                if (predefinedCategories.includes(postCategory)) {
                    this.blogCategory.value = post.category;
                    this.customCategoryDiv.style.display = 'none';
                } else {
                    const othersTag = document.querySelector('[data-category="others"]');
                    othersTag.classList.add('active');
                    this.blogCategory.value = post.category;
                    this.customCategoryInput.value = post.category;
                    this.customCategoryDiv.style.display = 'flex';
                }
                
                this.blogImage.value = post.image;
                this.keyword1.value = post.keyword1;
                this.keyword2.value = post.keyword2;
                this.keyword3.value = post.keyword3;
                this.keyword4.value = post.keyword4;
                this.keyword5.value = post.keyword5;
                
                this.blogEditor.innerHTML = post.content;
                setTimeout(() => {
                    this.blogEditor.focus();
                    this.updateToolbarState();
                }, 100);
            }
            
            showBlogDetail(postId) {
                console.log('🔍 Showing blog detail for post ID:', postId);
                console.log('📚 Available posts:', this.blogPosts.map(p => ({id: p.id, title: p.title})));
                
                this.hideAllSections();
                
                const post = this.blogPosts.find(p => String(p.id) === String(postId));
                
                if (post) {
                    console.log('✅ Post found:', post);
                    this.currentPostId = postId;
                    
                    this.detailTitle.textContent = post.title;
                    this.detailAuthor.textContent = `By ${post.authorName}`;
                    this.detailDate.textContent = `Published on ${post.date}`;
                    this.detailCategory.textContent = post.category;
                    this.detailCategory.className = 'blog-detail-category';
                    this.detailCategory.classList.add(this.getCategoryClass(post.category));
                    
                    this.detailContent.innerHTML = post.content;
                    
                    if (post.image && !post.image.includes('photo-1499750310107-5fef28a66643')) {
                        this.detailContent.insertAdjacentHTML('afterbegin', `<img src="${post.image}" alt="${post.title}" style="width: 100%; height: 300px; object-fit: cover; border-radius: 15px; margin-bottom: 30px;">`);
                    }
                    
                    if (this.currentUser && this.currentUser.email === post.authorId) {
                        this.postActions.style.display = 'flex';
                    } else {
                        this.postActions.style.display = 'none';
                    }
                    
                    this.blogDetail.style.display = 'block';
                    
                    console.log('✅ Blog detail view rendered successfully');
                } else {
                    console.error('❌ Post not found for ID:', postId);
                    this.showToast('Post not found', 'error');
                    this.showDashboard();
                }
            }
            
            showMyPosts() {
                if (!this.currentUser) {
                    this.showLoginForm();
                    this.showToast('Please login to view your posts', 'error');
                    return;
                }
                
                this.hideAllSections();
                this.dashboardSection.style.display = 'block';
                this.isMyPostsView = true;
                
                const myPosts = this.blogPosts.filter(post => post.authorId === this.currentUser.email);
                this.renderBlogPosts(null, myPosts);
            }
            
            hideAllSections() {
                this.heroSection.style.display = 'none';
                this.dashboardSection.style.display = 'none';
                this.loginForm.style.display = 'none';
                this.registerForm.style.display = 'none';
                this.editorSection.style.display = 'none';
                this.blogDetail.style.display = 'none';
            }
            
            handleLogout() {
                this.currentUser = null;
                localStorage.removeItem('blograck-current-user');
                this.updateAuthUI();
                this.showHomePage();
                this.showToast('Logged out successfully', 'success');
            }
            
            selectCategory(tag) {
                Array.from(this.categoryTags.children).forEach(t => t.classList.remove('active'));
                tag.classList.add('active');
                
                if (tag.dataset.category === 'others') {
                    this.customCategoryDiv.style.display = 'flex';
                    this.customCategoryInput.focus();
                    this.blogCategory.value = '';
                } else {
                    this.customCategoryDiv.style.display = 'none';
                    this.blogCategory.value = tag.dataset.category;
                }
            }
            
            filterPosts(filter) {
                Array.from(this.categoryFilters.children).forEach(f => f.classList.remove('active'));
                filter.classList.add('active');
                
                const category = filter.dataset.category;
                this.currentFilter = category;
                this.renderBlogPosts(category === 'all' ? null : category);
            }
            
            handleSearch() {
                const searchTerm = this.searchInput.value.trim();
                if (!searchTerm) return;
                
                this.currentSearchTerm = searchTerm.toLowerCase();
                this.clearSearchBtn.style.display = 'inline-block';
                
                const filteredPosts = this.blogPosts.filter(post => 
                    post.title.toLowerCase().includes(this.currentSearchTerm) ||
                    post.content.toLowerCase().includes(this.currentSearchTerm) ||
                    post.authorName.toLowerCase().includes(this.currentSearchTerm) ||
                    post.keyword1.toLowerCase().includes(this.currentSearchTerm) ||
                    post.keyword2.toLowerCase().includes(this.currentSearchTerm) ||
                    post.keyword3.toLowerCase().includes(this.currentSearchTerm) ||
                    post.keyword4.toLowerCase().includes(this.currentSearchTerm) ||
                    post.keyword5.toLowerCase().includes(this.currentSearchTerm)
                );
                
                this.renderBlogPosts(null, filteredPosts);
            }
            
            clearSearch() {
                this.searchInput.value = '';
                this.currentSearchTerm = '';
                this.clearSearchBtn.style.display = 'none';
                this.renderBlogPosts();
            }
            
            renderBlogPosts(category = null, postsToRender = null) {
                console.log('🎨 Rendering blog posts...', { 
                    category, 
                    postsToRender: postsToRender?.length, 
                    totalPosts: this.blogPosts.length 
                });
                
                this.blogGrid.innerHTML = '';
                
                let filteredPosts = postsToRender || this.blogPosts;
                
                if (category && category !== 'all') {
                    filteredPosts = filteredPosts.filter(post => post.category.toLowerCase() === category.toLowerCase());
                }
                
                if (this.currentSearchTerm) {
                    filteredPosts = filteredPosts.filter(post => 
                        post.title.toLowerCase().includes(this.currentSearchTerm) ||
                        post.content.toLowerCase().includes(this.currentSearchTerm) ||
                        post.authorName.toLowerCase().includes(this.currentSearchTerm) ||
                        post.keyword1.toLowerCase().includes(this.currentSearchTerm) ||
                        post.keyword2.toLowerCase().includes(this.currentSearchTerm) ||
                        post.keyword3.toLowerCase().includes(this.currentSearchTerm) ||
                        post.keyword4.toLowerCase().includes(this.currentSearchTerm) ||
                        post.keyword5.toLowerCase().includes(this.currentSearchTerm)
                    );
                }
                
                console.log('📊 Filtered posts count:', filteredPosts.length);
                
                if (filteredPosts.length === 0) {
                    this.blogGrid.innerHTML = `
                        <div class="no-posts" style="grid-column: 1/-1; text-align: center; padding: 40px;">
                            <h3>No posts found</h3>
                            <p>${this.currentUser ? 'Be the first to write one!' : 'Register to start writing!'}</p>
                        </div>
                    `;
                    return;
                }
                
                filteredPosts.forEach(post => {
                    const excerpt = this.getExcerpt(post.content);
                    const categoryClass = this.getCategoryClass(post.category);
                    const authorInitial = post.authorName ? post.authorName.charAt(0).toUpperCase() : 'U';
                    
                    const postElement = document.createElement('div');
                    postElement.className = 'blog-card';
                    postElement.setAttribute('data-post-id', post.id);
                    
                    postElement.innerHTML = `
                        ${post.image ? `
                        <div class="blog-card-img">
                            <img src="${post.image}" alt="${post.title}" onerror="this.parentElement.innerHTML='<div style=\\'background: linear-gradient(135deg, ${this.getCategoryColor(post.category)}); display: flex; align-items: center; justify-content: center; height: 100%; color: white; font-size: 3rem; opacity: 0.7;\\'><i class=\\'fas fa-feather-alt\\'></i></div>'">
                        </div>
                        ` : `
                        <div class="blog-card-img" style="background: linear-gradient(135deg, ${this.getCategoryColor(post.category)});">
                            <div style="display: flex; align-items: center; justify-content: center; height: 100%; color: white; font-size: 3rem; opacity: 0.7;">
                                <i class="fas fa-feather-alt"></i>
                            </div>
                        </div>
                        `}
                        <button class="share-btn" onclick="event.stopPropagation(); blogApp.shareBlog('${post.id}')">
                            <i class="fas fa-share-alt"></i>
                        </button>
                        <div class="blog-card-content">
                            <span class="blog-card-category ${categoryClass}">${post.category}</span>
                            <h3 class="blog-card-title">${post.title}</h3>
                            <p class="blog-card-excerpt">${excerpt}</p>
                            <div class="blog-card-meta">
                                <div class="author-info">
                                    <div class="author-avatar">${authorInitial}</div>
                                    <span>${post.authorName}</span>
                                </div>
                                <span>${post.date}</span>
                            </div>
                        </div>
                    `;
                    
                    postElement.addEventListener('click', () => {
                        console.log('🖱️ Blog card clicked for post:', post.id, post.title);
                        this.showBlogDetail(post.id);
                    });
                    
                    this.blogGrid.appendChild(postElement);
                });
                
                console.log('✅ Blog posts rendered successfully');
            }
            
            getExcerpt(content, length = 120) {
                try {
                    if (!content) return 'No content available...';
                    
                    const div = document.createElement('div');
                    div.innerHTML = content;
                    
                    const text = div.textContent || div.innerText || '';
                    
                    return text.length > length 
                        ? text.substring(0, length).trim() + '...' 
                        : text;
                } catch (e) {
                    console.error('❌ Error generating excerpt:', e);
                    return 'Click to read more...';
                }
            }
            
            getCategoryClass(category) {
                const classes = {
                    'technology': 'gradient-bg',
                    'travel': 'gradient-success-bg',
                    'lifestyle': 'gradient-danger-bg',
                    'business': 'gradient-warning-bg',
                    'health': 'gradient-accent-bg',
                    'education': 'gradient-info-bg',
                    'others': 'gradient-info-bg'
                };
                return classes[category.toLowerCase()] || 'gradient-info-bg';
            }
            
            getCategoryColor(category) {
                const colors = {
                    'technology': '#6c5ce7, #a29bfe',
                    'travel': '#00b894, #55efc4',
                    'lifestyle': '#d63031, #ff7675',
                    'business': '#fdcb6e, #ffeaa7',
                    'health': '#fd79a8, #ff7675',
                    'education': '#0984e3, #74b9ff',
                    'others': '#0984e3, #74b9ff'
                };
                return colors[category.toLowerCase()] || '#0984e3, #74b9ff';
            }
            
            showToast(message, type = 'success') {
                this.toastMessage.textContent = message;
                this.toast.className = 'toast';
                this.toast.classList.add(type);
                
                const icon = this.toast.querySelector('i');
                if (type === 'success') {
                    icon.className = 'fas fa-check-circle';
                } else {
                    icon.className = 'fas fa-exclamation-circle';
                }
                
                this.toast.classList.add('show');
                
                setTimeout(() => {
                    this.toast.classList.remove('show');
                }, 3000);
            }
            
            showLoading() {
                this.loadingSpinner.style.display = 'flex';
            }
            
            hideLoading() {
                this.loadingSpinner.style.display = 'none';
            }
        }

        // Initialize the application when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            console.log('🚀 DOM loaded, initializing BlogRack app...');
            try {
                const app = new BlogRackApp();
                console.log('✅ BlogRack app initialized successfully');
                
                // Make app globally accessible for share functionality
                window.blogApp = app;
            } catch (error) {
                console.error('❌ Failed to initialize BlogRack app:', error);
            }
        });
    </script>
</body>
</html>





